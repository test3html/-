function mendPlus(value){if(value>0&&value<1){return 1}else if(value<0){return 1}else{return value}} function elementMend(El,En){let rate="";switch(El){case "fire":rate=En.fire;break;case "water":rate=En.water;break;case "light":rate=En.light;break;case "dark":rate=En.dark;break} let result="";rate=String(rate);if(rate==="-"||rate==="+"){result=0}else if(rate.includes("/")){const dev=rate.split("/").map(Number);result=dev[0]/dev[1]}else if(rate==="0"){result=1}else{result=Number(rate)} return result} const enemylist={"enemy":[{"MD":"50","DF":"127","fire":0,"water":0,"light":0,"dark":0,"name":["ヌゥ","オミクロン","ブラックサイト","ベル","ウォール","まじんき","ジャリー","ジャリアン","まるまじろ","まるまじライダー","ラヴォス右(ディフェンスアーム)","コッカドゥドゥ","ホォーホォ","ラヴォス左","プチカラミティ","ジャリバード","バードコマンド","ソシャック","アルビノ","ジール","イーター","マカーバ","インナーガード","フリーランサー","エィユーのたて(開)","さまようもの","ディアブロス","げんしガエル","オーファン","マッドバット","モスティ","レイ二ー","プチラヴォスR(口)","ヌゥ(通常攻撃)","ガズー","バグ","スカラベー","ヤクラ","ゴンザレス","ダルトンゴーレム","ルインゴーレム","グラン","リオン","グランとリオン","二ズベールR","スーパーマヨネー","ダルトン","ダルトンR","メタルミュー","スーパーソイソー","グレートビネガー","カエルだい王","ジール(顔)","ディスプレイ","メガミュータント(上半身)","メガミュータント(下半身)","スーパーマヨネー(単体)","ルストティラノ","マザーブレーン","アトロポス145","ダイゴロー","ラヴォス(グランとリオン)","ヤクラ13せい","ラヴォス(左腕)","ラヴォス(右腕)","ラヴォス(センタービット)","ビット","ギガガイア","ギガガイアのアタックアーム","アタックアーム","プチラヴォス(口)","ラヴォス(ガードマシンビット)","ラヴォス(ギガガイア)","ラヴォス(外殻)","ラヴォス(海底神殿)","マヨネー？","ビネガーの罠","マスターゴーレム","ダルトンぶたい","魔王(北の岬)"]},{"MD":"30","DF":"200","fire":0,"water":0,"light":0,"dark":0,"name":["きょうりゅうじん緑","ケイブケイオス","タッタ"]},{"MD":"30","DF":"230","fire":0,"water":0,"light":0,"dark":0,"name":["キョジュウ","アザーラ","ラヴォス(アザーラ)"]},{"MD":"80","DF":"127","fire":0,"water":0,"light":0,"dark":0,"name":["マモ"]},{"MD":"50","DF":"150","fire":0,"water":0,"light":0,"dark":2,"name":["クロウリーさま"]},{"MD":"50","DF":"127","fire":4,"water":0,"light":0,"dark":0,"name":["魔王のしもべ赤"]},{"MD":"80","DF":"250","fire":0,"water":0,"light":0,"dark":0,"name":["ドロクイつかい"]},{"MD":"30","DF":"127","fire":0,"water":0,"light":0,"dark":0,"name":["わるまじろ","バンプット"]},{"MD":"50","DF":"230","fire":0,"water":0,"light":0,"dark":0,"name":["まるまじろR"]},{"MD":"50","DF":"170","fire":"+","water":0,"light":0,"dark":0,"name":["ボォーボォ"]},{"MD":"10","DF":"127","fire":2,"water":3,"light":3,"dark":3,"name":["バイター"]},{"MD":"10","DF":"180","fire":2,"water":0,"light":3,"dark":0,"name":["ミアンヌ"]},{"MD":"50","DF":"127","fire":0,"water":0,"light":"1/64","dark":"1/64","name":["ツインカム"]},{"MD":"90","DF":"77","fire":0,"water":0,"light":2,"dark":0,"name":["ルインストーカー"]},{"MD":"50","DF":"64","fire":0,"water":0,"light":0,"dark":0,"name":["ラッフルシア"]},{"MD":"50","DF":"127","fire":3,"water":0,"light":0,"dark":0,"name":["プラントラー"]},{"MD":"65","DF":"127","fire":0,"water":0,"light":0,"dark":0,"name":["たかねのはな"]},{"MD":"0","DF":"150","fire":0,"water":0,"light":0,"dark":4,"name":["エッガー"]},{"MD":"50","DF":"127","fire":2,"water":0,"light":0,"dark":"+","name":["ボーンナム","アナトミー"]},{"MD":"95","DF":"192","fire":2,"water":0,"light":0,"dark":"+","name":["ボーンナム+イド"]},{"MD":"50","DF":"250","fire":0,"water":0,"light":0,"dark":"+","name":["スケルトン"]},{"MD":"0","DF":"127","fire":2,"water":0,"light":2,"dark":"+","name":["ランサー"]},{"MD":"50","DF":"127","fire":2,"water":0,"light":0,"dark":0,"name":["ナイトゴースト","スカッシャー"]},{"MD":"50","DF":"127","fire":"-","water":0,"light":"-","dark":0,"name":["アウトロウ"]},{"MD":"65","DF":"255","fire":0,"water":0,"light":0,"dark":0,"name":["ギガミュータント(上半身)","ギガミュータント(下半身)"]},{"MD":"50","DF":"255","fire":0,"water":0,"light":0,"dark":0,"name":["テラミュータント(上半身)","カブトシュリンプ","どうくつこうもり"]},{"MD":"100","DF":"255","fire":"+","water":"+","light":"+","dark":"+","name":["テラミュータント(下半身)"]},{"MD":"50","DF":"253","fire":2,"water":0,"light":0,"dark":0,"name":["ジャグラー"]},{"MD":"0","DF":"127","fire":"+","water":"-","light":"+","dark":"+","name":["メルフィック(コア)"]},{"MD":"70","DF":"127","fire":0,"water":0,"light":0,"dark":0,"name":["ジールメイジ","ビリオン","スペッキオ(高レべ)"]},{"MD":"50","DF":"150","fire":0,"water":0,"light":"1/2","dark":0,"name":["きょうりゅうじん紫"]},{"MD":"100","DF":"253","fire":"-","water":"-","light":"-","dark":"-","name":["えいへい","エィユーのたて(閉)","プチラヴォスR(殻)","プチラヴォス(殻)"]},{"MD":"0","DF":"0","fire":4,"water":4,"light":4,"dark":4,"name":["えいへい(盾)"]},{"MD":"100","DF":"127","fire":"-","water":"-","light":"-","dark":"-","name":["たゆとうもの","ビネガー"]},{"MD":"50","DF":"253","fire":0,"water":0,"light":0,"dark":0,"name":["クライン","セーブポイント","ヘケラン","ラヴォス(ヘケラン)","スペッキオ"]},{"MD":"25","DF":"192","fire":0,"water":0,"light":0,"dark":0,"name":["エイシトビートル"]},{"MD":"50","DF":"100","fire":0,"water":0,"light":0,"dark":0,"name":["モンクガーゴイル"]},{"MD":"10","DF":"200","fire":2,"water":2,"light":2,"dark":2,"name":["魔王のしもべ"]},{"MD":"0","DF":"192","fire":"1/2","water":"1/2","light":"1/2","dark":"1/2","name":["しょくようがえる"]},{"MD":"50","DF":"220","fire":"+","water":"+","light":3,"dark":"+","name":["スカウター"]},{"MD":"50","DF":"127","fire":"1/4","water":"1/4","light":"1/4","dark":"1/4","name":["プチアーリマン"]},{"MD":"50","DF":"127","fire":"1/2","water":0,"light":3,"dark":0,"name":["マウスハンター","デバッガー"]},{"MD":"50","DF":"127","fire":0,"water":0,"light":3,"dark":0,"name":["デバッガープラス","ティラングライダ","バージョン4、0","バージョン4.0"]},{"MD":"0","DF":"127","fire":2,"water":"+","light":"+","dark":"+","name":["ソーサラー"]},{"MD":"100","DF":"255","fire":0,"water":0,"light":0,"dark":0,"name":["ミリオン","ラヴォス(本体)","ラヴォスコア"]},{"MD":"25","DF":"127","fire":"1/2","water":0,"light":0,"dark":0,"name":["クレェタ"]},{"MD":"50","DF":"127","fire":"+","water":4,"light":"+","dark":"-","name":["ドッカン"]},{"MD":"0","DF":"127","fire":0,"water":0,"light":0,"dark":0,"name":["サルガッサ"]},{"MD":"100","DF":"140","fire":"-","water":"-","light":"-","dark":"-","name":["イワン"]},{"MD":"60","DF":"180","fire":0,"water":0,"light":0,"dark":0,"name":["ティラン城のゲンブ"]},{"MD":"50","DF":"135","fire":"-","water":"-","light":"-","dark":"-","name":["ゲンブ"]},{"MD":"50","DF":"150","fire":0,"water":0,"light":3,"dark":4,"name":["ドンドラゴ"]},{"MD":"50","DF":"100","fire":"1/2","water":0,"light":"1/2","dark":0,"name":["サンドラゴ"]},{"MD":"50","DF":"160","fire":0,"water":0,"light":0,"dark":0,"name":["シルエット"]},{"MD":"99","DF":"127","fire":0,"water":0,"light":0,"dark":0,"name":["イド"]},{"MD":"99","DF":"255","fire":"1/8","water":"1/8","light":2,"dark":"1/8","name":["アシッド"]},{"MD":"90","DF":"250","fire":"1/8","water":"1/8","light":2,"dark":"1/8","name":["アルカリィ"]},{"MD":"70","DF":"83","fire":0,"water":0,"light":0,"dark":0,"name":["オーメン"]},{"MD":"50","DF":"83","fire":0,"water":0,"light":0,"dark":0,"name":["カーヴィナ"]},{"MD":"0","DF":"0","fire":0,"water":0,"light":0,"dark":0,"name":["オウガン"]},{"MD":"75","DF":"240","fire":"1/2","water":"1/2","light":"1/2","dark":"1/2","name":["オウガン+ハンマー"]},{"MD":"30","DF":"127","fire":4,"water":4,"light":4,"dark":"+","name":["魔王のしもべオウガンタイプ"]},{"MD":"90","DF":"127","fire":0,"water":0,"light":0,"dark":0,"name":["バオバオ"]},{"MD":"90","DF":"100","fire":0,"water":0,"light":0,"dark":0,"name":["サンタナ"]},{"MD":"40","DF":"230","fire":0,"water":0,"light":0,"dark":0,"name":["ドデッカダッダ"]},{"MD":"50","DF":"127","fire":"-","water":"-","light":"-","dark":"-","name":["ギア"]},{"MD":"50","DF":"170","fire":0,"water":0,"light":0,"dark":0,"name":["ドロクイ"]},{"MD":"50","DF":"150","fire":2,"water":"-","light":0,"dark":0,"name":["ドロクイL"]},{"MD":"50","DF":"150","fire":"-","water":2,"light":0,"dark":0,"name":["ドロクイR"]},{"MD":"30","DF":"140","fire":"-","water":"-","light":"-","dark":"-","name":["サイト"]},{"MD":"50","DF":"127","fire":0,"water":0,"light":"+","dark":0,"name":["ティランカイト"]},{"MD":"50","DF":"127","fire":0,"water":2,"light":0,"dark":"-","name":["ノヘ"]},{"MD":"0","DF":"127","fire":0,"water":0,"light":0,"dark":4,"name":["ラットラー"]},{"MD":"50","DF":"250","fire":0,"water":0,"light":0,"dark":0,"name":["グレミング"]},{"MD":"50","DF":"127","fire":0,"water":0,"light":0,"dark":3,"name":["バージョン2、0","バージョン3、0"]},{"MD":"50","DF":"127","fire":0,"water":0,"light":"+","dark":"+","name":["デイブ"]},{"MD":"100","DF":"255","fire":"-","water":"-","light":"-","dark":"-","name":["サイラス","ディスプレイ(防御)","バージョン2.0","サンオブサン"]},{"MD":"60","DF":"160","fire":0,"water":0,"light":"4/5","dark":0,"name":["ドラゴンせんしゃ","ラヴォス(ドラゴン戦車)"]},{"MD":"60","DF":"120","fire":"4/5","water":0,"light":"2/3","dark":0,"name":["しゃりん","ラヴォス左(ドラゴン戦車しゃりん)"]},{"MD":"100","DF":"252","fire":0,"water":0,"light":0,"dark":0,"name":["二ズベール","ラヴォス(ニズベール)"]},{"MD":"50","DF":"127","fire":"1/2","water":"1/2","light":"1/2","dark":"1/2","name":["ソイソー"]},{"MD":"60","DF":"127","fire":"1/2","water":"-","light":"1/2","dark":"1/2","name":["ソイソー(刀装備)"]},{"MD":"60","DF":"150","fire":0,"water":"2/3","light":"2/3","dark":"2/3","name":["マヨネー"]},{"MD":"50","DF":"127","fire":0,"water":0,"light":0,"dark":2,"name":["ミュータント"]},{"MD":"100","DF":"255","fire":"1/2","water":"1/2","light":"1/2","dark":"1/2","name":["ビネガー(館)"]},{"MD":"30","DF":"255","fire":0,"water":0,"light":0,"dark":0,"name":["エイシトサウルス"]},{"MD":"30","DF":"192","fire":0,"water":0,"light":0,"dark":0,"name":["エイシト二クス"]},{"MD":"80","DF":"100","fire":0,"water":0,"light":0,"dark":0,"name":["フォシルエイプ"]},{"MD":"85","DF":"0","fire":"-","water":0,"light":"-","dark":0,"name":["あたま","ラヴォス左(ドラゴン戦車頭)"]},{"MD":"50","DF":"180","fire":0,"water":0,"light":0,"dark":0,"name":["ジャリボウズ"]},{"MD":"99","DF":"255","fire":"1/64","water":"1/64","light":"1/64","dark":"1/64","name":["ジール(右手)","ジール(左手)"]},{"MD":"50","DF":"175","fire":0,"water":"+","light":0,"dark":"+","name":["ジャンクドラガー(下半身)","ラヴォス(ジャンクドラガー下半身)"]},{"MD":"50","DF":"127","fire":"+","water":0,"light":"+","dark":0,"name":["ジャンクドラガー(上半身)","ラヴォス(ジャンクドラガー)"]},{"MD":"65","DF":"250","fire":"-","water":"-","light":"-","dark":"-","name":["メルフィック(下半身)","メルフィック(上半身)"]},{"MD":"100","DF":"253","fire":0,"water":0,"light":0,"dark":0,"name":["ブラックティラノ","ラヴォス(ブラックティラノ)"]},{"MD":"50","DF":"127","fire":"-","water":0,"light":0,"dark":0,"name":["ラヴォス(ガードマシン)","ガードマシン"]},{"MD":"50","DF":"127","fire":3,"water":0,"light":0,"dark":"+","name":["ファットビースト"]},{"MD":"50","DF":"230","fire":"+","water":"+","light":"+","dark":"+","name":["ラヴォス(魔王)","魔王"]},{"MD":"50","DF":"192","fire":0,"water":0,"light":0,"dark":0,"name":["バイト"]},{"MD":"50","DF":"220","fire":3,"water":"+","light":"+","dark":3,"name":["スカウターレッド"]},{"MD":"50","DF":"220","fire":"+","water":3,"light":"+","dark":"+","name":["スカウターブルー"]},{"MD":"30","DF":"100","fire":0,"water":0,"light":3,"dark":0,"name":["レーザーサイト"]},{"MD":"85","DF":"127","fire":0,"water":0,"light":0,"dark":0,"name":["スペッキオ(99)"]},{"MD":"0","DF":"127","fire":"+","water":4,"light":"+","dark":"+","name":["ラヴォス(全吸収)"]},{"MD":"50","DF":"127","fire":"+","water":"+","light":"+","dark":"+","name":["ラヴォスビット"]},{"MD":"50","DF":"192","fire":"1/2","water":0,"light":"1/2","dark":0,"name":["ララカルゴ"]},{"MD":"0","DF":"127","fire":4,"water":4,"light":4,"dark":4,"name":["まるまじボンバー"]},{"MD":"99","DF":"254","fire":"+","water":"+","light":"+","dark":"+","name":["バージョン3.0"]}]};const realSpec=document.forms.getspec;const selects=document.forms.calcform;const inputs=Array.from(realSpec.querySelectorAll("input[type='number']"));const realSpecSelect=Array.from(realSpec.querySelectorAll("select"));const selection=Array.from(selects.querySelectorAll("select"));const suggestion=selects.querySelector("input[type='text']");suggestion.addEventListener("change",e=>{selection[3].innerHTML="";enemylist.enemy.forEach(en=>{en.name.forEach(ENN=>{if(ENN.includes(e.target.value)){selection[3].innerHTML+=` <option value="${ENN}">${ENN}</option> `}})})});document.getElementById("send").addEventListener("click",e=>{e.preventDefault();const howMany=document.forms.calcform.querySelector("input[type='number']").value;const getParts=(partyMemberOf)=>{const specSelects=document.forms.getspec.querySelectorAll("select");const specInputs=document.forms.getspec.querySelectorAll("input[type='number']");const formSelects=document.forms.calcform.querySelectorAll("select");const formInputs=document.forms.calcform.querySelectorAll("input[type='number']");let errorIs=0;partyMemberOf=Number(partyMemberOf);specSelects.forEach(reset=>{reset.classList.remove("error")});specInputs.forEach(reset=>{reset.classList.remove("error")});formSelects.forEach(reset=>{reset.classList.remove("error")});formInputs.forEach(reset=>{reset.classList.remove("error")});document.getspec.style.backgroundColor="";if(partyMemberOf<1||partyMemberOf>3){inputs[0].classList.add("error");alert("メンバー数は1から3人です");errorIs=1} for(let u=0;u<partyMemberOf;u++){if(formSelects[u].value==="none"){alert("プレイヤーが選択されていません");formSelects[u].classList.add("error");errorIs=1}} if(!formSelects[formSelects.length-1].value){alert("仮想敵を選択していません");formSelects[formSelects.length-1].classList.add("error");errorIs=1} let spec=[];for(let j=0;j<partyMemberOf;j++){switch(formSelects[j].value){case "クロノ":if(!specInputs[0].value||!specInputs[1].value||!specInputs[2].value){(!specInputs[0].value)?specInputs[0].classList.add("error"):"";(!specInputs[1].value)?specInputs[1].classList.add("error"):"";(!specInputs[2].value)?specInputs[2].classList.add("error"):"";errorIs=1} spec.push({name:"クロノ",skill:specSelects[0].value,weapon:specSelects[1].value,LV:specInputs[0].value,power:specInputs[1].value,magic:specInputs[2].value,});break;case "マール":if(!specInputs[3].value||!specInputs[4].value||!specInputs[5].value){(!specInputs[3].value)?specInputs[3].classList.add("error"):"";(!specInputs[4].value)?specInputs[4].classList.add("error"):"";(!specInputs[5].value)?specInputs[5].classList.add("error"):"";errorIs=1} spec.push({name:"マール",skill:specSelects[2].value,weapon:specSelects[3].value,LV:specInputs[3].value,hit:specInputs[4].value,magic:specInputs[5].value});break;case "ルッカ":if(!specInputs[6].value||!specInputs[7].value||!specInputs[8].value){(!specInputs[6].value)?specInputs[6].classList.add("error"):"";(!specInputs[7].value)?specInputs[7].classList.add("error"):"";(!specInputs[8].value)?specInputs[8].classList.add("error"):"";errorIs=1} spec.push({name:"ルッカ",skill:specSelects[4].value,weapon:specSelects[5].value,LV:specInputs[6].value,hit:specInputs[7].value,magic:specInputs[8].value});break;case "カエル":if(!specInputs[9].value||!specInputs[10].value||!specInputs[11].value||!specInputs[12].value||!specInputs[13].value){(!specInputs[9].value)?specInputs[9].classList.add("error"):"";(!specInputs[10].value)?specInputs[10].classList.add("error"):"";(!specInputs[11].value)?specInputs[11].classList.add("error"):"";(!specInputs[12].value)?specInputs[12].classList.add("error"):"";(!specInputs[13].value)?specInputs[13].classList.add("error"):"";errorIs=1} spec.push({name:"カエル",skill:specSelects[6].value,weapon:specSelects[7].value,LV:specInputs[9].value,HP:specInputs[10].value,power:specInputs[11].value,magic:specInputs[12].value,stamina:specInputs[13].value});break;case "ロボ":if(!specInputs[14].value||!specInputs[15].value||!specInputs[16].value||!specInputs[17].value){(!specInputs[14].value)?specInputs[14].classList.add("error"):"";(!specInputs[15].value)?specInputs[15].classList.add("error"):"";(!specInputs[16].value)?specInputs[16].classList.add("error"):"";(!specInputs[17].value)?specInputs[17].classList.add("error"):"";errorIs=1} spec.push({name:"ロボ",skill:specSelects[8].value,weapon:specSelects[9].value,LV:specInputs[14].value,power:specInputs[15].value,magic:specInputs[16].value,stamina:specInputs[17].value,});break;case "エイラ":if(!specInputs[18].value||!specInputs[19].value||!specInputs[20].value||!specInputs[21].value||!specInputs[22].value){(!specInputs[18].value)?specInputs[18].classList.add("error"):"";(!specInputs[19].value)?specInputs[19].classList.add("error"):"";(!specInputs[20].value)?specInputs[20].classList.add("error"):"";(!specInputs[21].value)?specInputs[21].classList.add("error"):"";(!specInputs[22].value)?specInputs[22].classList.add("error"):"";errorIs=1} spec.push({name:"エイラ",skill:specSelects[10].value,weapon:specSelects[11].value,LV:specInputs[18].value,HP:specInputs[19].value,power:specInputs[20].value,magic:specInputs[21].value,stamina:specInputs[22].value,});break;case "魔王":if(!specInputs[23].value||!specInputs[24].value||!specInputs[25].value){(!specInputs[23].value)?specInputs[23].classList.add("error"):"";(!specInputs[24].value)?specInputs[24].classList.add("error"):"";(!specInputs[25].value)?specInputs[25].classList.add("error"):"";errorIs=1} spec.push({name:"魔王",skill:specSelects[12].value,weapon:specSelects[13].value,LV:specInputs[23].value,power:specInputs[24].value,magic:specInputs[25].value,});break;default:errorIs=1;break}} if(errorIs===1){alert("入力漏れがあります");return} return spec};const spec=getParts(howMany);const getEnemyGuard=(selected,json)=>{let guard=[];json.enemy.forEach(en=>{en.name.forEach(enn=>{if(selected===enn){guard={MD:en.MD,DF:en.DF,fire:en.fire,water:en.water,light:en.light,dark:en.dark}}})});return guard};const defend=getEnemyGuard(selection[3].value,enemylist);const result=(function(spec,defend){let damages=[];spec.forEach(who=>{const Chrono=(CHobj,Gobj)=>{let type=0;if(CHobj.skill=="normalAttack"){type=1} let rate="";let times=1;let magictype=0;switch(CHobj.skill){case "normalAttack":rate=8;break;case "1":rate=10;break;case "2":rate=10;magictype=1;break;case "3":rate=12;magictype=1;break;case "4":rate=16;break;case "5":rate=14;magictype=1;break;case "6":rate=29/4;times=4;break;case "7":rate=50;magictype=1;break} let forse="";let special=0;let option=0;let mend=1;if(magictype===0){const usableWeapon=Number(CHobj.weapon);if(usableWeapon===17){special=1} const usablePower=Number(CHobj.power);const usableDF=Number(Gobj.DF);const ChronosWeapon=[1,3,7,15,20,25,30,40,43,70,90,110,125,135,145,150,155,170,220];const minusDF=mendPlus(256-usableDF)/256;forse=rate*(usablePower*12+ChronosWeapon[usableWeapon]*5)/18*minusDF;option=usablePower/3}else{const usableMagic=Number(CHobj.magic);const usableLV=Number(CHobj.LV);const usableMD=Number(Gobj.MD);const minusMD=mendPlus(256-usableMD*5/2)/256;forse=rate*(usableMagic+usableLV)*12/15*minusMD;option=usableMagic*77/256;mend=elementMend("light",Gobj)} let min=mendPlus(forse*mend)*times;let max=mendPlus((forse+option)*mend)*times;if(type===1){max*=2;if(special===1){max*=2}} return{Min:min,Max:max}};const Marl=(Maobj,Gobj)=>{let min="";let max="";if(Maobj.skill==="normalAttack"){const usableHit=Number(Maobj.hit);const usableWeapon=Number(Maobj.weapon);const usableDF=Number(Gobj.DF);const MarlsWeapon=[3,15,20,25,40,60,80,100,140,180];const minusDF=mendPlus(256-usableDF)/256;min=4*(usableHit+MarlsWeapon[usableWeapon])*minusDF;max=(min+usableHit*77/256)*2}else{const usableMagic=Number(Maobj.magic);const usableLV=Number(Maobj.LV);const usableMD=Number(Gobj.MD);const minusMD=mendPlus(256-usableMD*5/2)/256;let rate="";switch(Maobj.skill){case "1":rate=11;break;case "2":rate=14;break} const force=rate*(usableMagic+usableLV)*12/15*minusMD;min=force*elementMend("water",Gobj);max=(force+usableMagic*77/256)*elementMend("water",Gobj)} return{Min:mendPlus(min),Max:mendPlus(max)}};const Lucca=(Luobj,Gobj)=>{const usableWeapon=Number(Luobj.weapon);let mirracle=0;if(usableWeapon===8){mirracle=1} let min="";let max="";if(Luobj.skill==="normalAttack"){const usableHit=Number(Luobj.hit);const LuccasWeapon=[5,7,15,25,40,60,80,110,250];const usableDF=Number(Gobj.DF);const minusDF=mendPlus(256-usableDF)/256;min=4*(usableHit+LuccasWeapon[usableWeapon])*minusDF;max=(min+usableHit*77/256)*2;if(mirracle===1){min/=10;max*=3}}else{let rate="";switch(Luobj.skill){case "1":rate=6;break;case "2":rate=11;break;case "3":rate=12;break;case "4":rate=14;break;case "5":rate=32;break;case "6":rate=42;break} const usableMagic=Number(Luobj.magic);const usableLV=Number(Luobj.LV);const usableMD=Number(Gobj.MD);const minusMD=mendPlus(256-usableMD*5/2);const force=rate*(usableMagic+usableLV)*12/15*minusMD/256;min=force;max=(force+usableMagic*77/256);if(mirracle===1){min/=10;max*=3} min*=elementMend("fire",Gobj);max*=elementMend("fire",Gobj)} return{Min:mendPlus(min),Max:mendPlus(max)}};const Frog=(Frobj,Gobj)=>{let type=0;let rate="";if(Frobj.skill==="normalAttack"){type=1;rate=8} let magictype=0;switch(Frobj.skill){case "1":rate=11;break;case "2":rate=11;magictype=1;break;case "3":rate=18;break;case "4":rate=14;magictype=1;break;case "5":magictype=2;break} let min="";let max="";if(magictype!==1){const usableDF=Number(Gobj.DF);const minusDF=mendPlus(256-usableDF);if(magictype===0){const usablePower=Number(Frobj.power);const usableWeapon=Number(Frobj.weapon);const FrogsWeapon=[6,10,75,90,105,120,120,135,200];const force=rate*(usablePower*12+FrogsWeapon[usableWeapon]*5)/18*minusDF/256;min=force;max=force+usablePower/3;if(type===1){max*=2}}else if(magictype===2){const usableHP=Number(Frobj.HP);const usableStamina=Number(Frobj.stamina);min=1;max=(usableHP-1)*usableStamina/10+(usableHP-1)/10}}else{const usableMagic=Number(Frobj.magic);const usableLV=Number(Frobj.LV);const usableMD=Number(Gobj.MD);const minusMD=mendPlus(256-usableMD*5/2);const force=rate*(usableLV+usableMagic)*12/15*minusMD/256;min=force*elementMend("water",Gobj);max=(force+usableMagic*77/256)*elementMend("water",Gobj)} return{Min:mendPlus(min),Max:mendPlus(max)}};const Robot=(Roobj,Gobj)=>{let rate="";let magictype=0;let element="";let type=0;switch(Roobj.skill){case "normalAttack":rate=8;type=1;break;case "1":rate=11;break;case "2":element="dark";rate=10;magictype=1;break;case "3":magictype=2;break;case "4":rate=25;break;case "5":element="fire";magictype=1;rate=30;break;case "6":element="light";magictype=1;rate=40;break} let min="";let max="";if(magictype!==1){const usablePower=Number(Roobj.power);const usableDF=Number(Gobj.DF);const minusDF=mendPlus(256-usableDF)/256;if(magictype===0){const usableWeapon=Number(Roobj.weapon);const RobotsWeapon=[20,25,30,40,50,70,90,105,120,135,150,1];const force=rate*(usablePower*12+RobotsWeapon[usableWeapon]*5)/18*minusDF;min=force;max=force+usablePower/3;if(type===1){max*=2}}else if(magictype===2){const usableLV=Number(Roobj.LV);const force=(usablePower*16+usableLV*usableLV/5)*21/20*minusDF;min=force;max=force+usableLV/3}}else{const usableHP=Number(Roobj.HP);const usableMagic=Number(Roobj.magic);const usableLV=Number(Roobj.LV);const usableMD=Number(Gobj.MD);const minusMD=mendPlus(256-usableMD*5/2)/256;force=rate*(usableMagic+usableLV)*12/15*minusMD;min=force*elementMend(element,Gobj);max=(force+usableMagic*77/256)*elementMend(element,Gobj)} if(Number(Roobj.weapon)===11){min=1;max*=9/2} return{Min:mendPlus(min),Max:mendPlus(max)}};const Ayla=(Ayobj,Gobj)=>{let rate="";let magictype=0;let type=0;switch(Ayobj.skill){case "normalAttack":rate=9;type=1;break;case "1":rate=14;break;case "2":rate=20;break;case "3":rate=30;break;case "4":magictype=1;break;case "5":magictype=2;break;case "6":rate=37/3;type=2;break} let min="";let max="";const usableLV=Number(Ayobj.LV);if(magictype!==1){const usableDF=Number(Gobj.DF);const minusDF=mendPlus(256-usableDF)/256;if(magictype===0){const usablePower=Number(Ayobj.power);const force=(usablePower*16+usableLV*usableLV/5)*rate/20*minusDF;min=force;max=force+usableLV/3;if(type===1){max*=2;if(usableLV>=96){max=9999}}else if(type===2){min*=3;max*=3}}else if(magictype===2){const usableHP=Number(Ayobj.HP);const usableStamina=Number(Ayobj.stamina);const force=usableStamina*(usableHP-1)*9/140*minusDF;min=0;max=force+(usableHP-1)/10}}else{const usableMagic=Number(Ayobj.magic);const usableMD=Number(Gobj.MD);const minusMD=mendPlus(256-usableMD*5/2)/256;const force=40*(usableMagic+usableLV)*12/15*minusMD;min=force;max=force+usableMagic*77/256} return{Min:mendPlus(min),Max:mendPlus(max)}};const Magus=(Maobj,Gobj)=>{let rate="";let magictype=0;let element="";switch(Maobj.skill){case "normalAttack":rate=8;break;case "1":rate=18;element="light";magictype=1;break;case "2":rate=18;element="water";magictype=1;break;case "3":rate=18;element="fire";magictype=1;break;case "4":case "5":rate=25;element="dark";magictype=1;break;case "6":rate=38;element="dark";magictype=1;break} let min="";let max="";if(magictype===0){const usablePower=Number(Maobj.power);const usableWeapon=Number(Maobj.weapon);const usableDF=Number(Gobj.DF);const MagussWeapon=[120,135,150,160];const minusDF=mendPlus(256-usableDF)/256;const force=rate*(usablePower*12+MagussWeapon[usableWeapon]*5)/18*minusDF;min=force;max=(force+usablePower/3)*2}else{const usableMagic=Number(Maobj.magic);const usableLV=Number(Maobj.LV);const usableMD=Number(Gobj.MD);const minusMD=mendPlus(256-usableMD*5/2)/256;const force=rate*(usableMagic+usableLV)*12/15*minusMD;min=force*elementMend(element,Gobj);max=(force+usableMagic*77/256)*elementMend(element,Gobj)} return{Min:mendPlus(min),Max:mendPlus(max)}};switch(who.name){case "クロノ":damages.push(Chrono(who,defend));break;case "マール":damages.push(Marl(who,defend));break;case "ルッカ":damages.push(Lucca(who,defend));break;case "カエル":damages.push(Frog(who,defend));break;case "ロボ":damages.push(Robot(who,defend));break;case "エイラ":damages.push(Ayla(who,defend));break;case "魔王":damages.push(Magus(who,defend));break}});return damages})(spec,defend);const party=spec.length;const display=(function(result,party){const IDs=["1Pdamage","2Pdamage","3Pdamage"];for(let i=0;i<party;i++){let address=document.getElementById(IDs[i]);address.querySelector("td.min").innerHTML=` ${Math.floor(result[i].Min)} `;address.querySelector("td.max").innerHTML=` ${Math.floor(result[i].Max)} `}})(result,party);(function(defend){let weakpoints=[];const element=["fire","water","light","dark"];for(let i=0;i<4;i++){let rate=elementMend(element[i],defend);if(rate>=1){if(element[i]==="fire"){weakpoints.push([rate,"fire"])}else if(element[i]==="water"){weakpoints.push([rate,"water"])}else if(element[i]==="light"){weakpoints.push([rate,"light"])}else if(element[i]==="dark"){weakpoints.push([rate,"dark"])}}} let normal="";if(weakpoints.length===4){weakpoints.forEach(WP=>{if(WP[0]===1){normal+1}})} let result="";if(weakpoints.length===0){result="弱点なし"}else{weakpoints.forEach(W=>{if(W[1]==="fire"){result+=`火属性${W[0]}倍<br>`} if(W[1]==="water"){result+=`水属性${W[0]}倍<br>`} if(W[1]==="light"){result+=`天属性${W[0]}倍<br>`} if(W[1]==="dark"){result+=`冥属性${W[0]}倍<br>`}})} if(result!=="弱点なし"){result="弱点:<br>"+result+"だ!<br>それ以外は耐性があるようだぞ";if(normal===4){result="特に弱点はないようなので、どの攻撃を出しても同じだぞ"}} document.getElementById("weekpoint").innerHTML=`${result}`})(defend);const ALLmin=document.getElementById("combination").querySelectorAll("td.min");const ALLmax=document.getElementById("combination").querySelectorAll("td.max");Array.from(ALLmax).forEach(A=>{A.innerHTML="×"});Array.from(ALLmin).forEach(A=>{A.innerHTML="×"});const triplemin=document.getElementById("triple").querySelectorAll("td.min");const triplemax=document.getElementById("triple").querySelectorAll("td.max");Array.from(triplemax).forEach(A=>{A.innerHTML="×"});Array.from(triplemin).forEach(A=>{A.innerHTML="×"});if(howMany>=2){(function(spec,defend){const comboMap={"クロノマール":{"arg":["クロノ","マール"]},"クロノルッカ":{"arg":["クロノ","ルッカ"]},"クロノカエル":{"arg":["クロノ","カエル"]},"クロノロボ":{"arg":["クロノ","ロボ"]},"クロノエイラ":{"arg":["クロノ","エイラ"]},"マールルッカ":{"arg":["マール","ルッカ"]},"マールカエル":{"arg":["マール","カエル"]},"マールロボ":{"arg":["マール","ロボ"]},"マールエイラ":{"arg":["マール","エイラ"]},"ルッカカエル":{"arg":["ルッカ","カエル"]},"ルッカロボ":{"arg":["ルッカ","ロボ"]},"ルッカエイラ":{"arg":["ルッカ","エイラ"]},"カエルロボ":{"arg":["カエル","ロボ"]},"カエルエイラ":{"arg":["カエル","エイラ"]},"ロボエイラ":{"arg":["ロボ","エイラ"]}};let indexMap=spec.map((c,N)=>[c.name,N]);let member=[];indexMap.forEach(M=>{member.push(M[0])});let combo=[];for(let i=0;i<member.length;i++){for(let j=i+1;j<member.length;j++){const a=member[i];const b=member[j];const k1=a+b;const k2=b+a;if(comboMap[k1]){combo.push(k1)} if(comboMap[k2]){combo.push(k2)}}} let MaxandMin=[];combo.forEach(C=>{const info=comboMap[C];const Dual=Array.from(document.querySelectorAll('.'+C));if(Dual.length===0){return} const arg1=spec.find(obj=>obj.name===info.arg[0]);const arg2=spec.find(obj=>obj.name===info.arg[1]);switch(C){case "クロノマール":for(let flag=0;flag<Dual.length;flag++){const ChronoMarl=(Chrono,Marl,target,flag)=>{const ChronoPower=Number(Chrono.power);const CWeaponIndex=Number(Chrono.weapon);const ChronosWeapon=[1,3,7,15,20,25,30,40,43,70,90,110,125,135,145,150,155,170,220];const MarlMagic=Number(Marl.magic);const MarlLV=Number(Marl.LV);const usableMD=Number(target.MD);const usableDF=Number(target.DF);const minusDF=mendPlus(256-usableDF)/256;const minusMD=mendPlus(256-usableMD*5/2)/256;let usingRate=[];if(flag===0){usingRate=[16,11,5,4]}else{usingRate=[29,14,1,1]} const ChCalc=usingRate[0]*(ChronoPower*12+ChronosWeapon[CWeaponIndex]*5)/18*minusDF;const MaCalc=usingRate[1]*(MarlLV+MarlMagic)*12/15*minusMD;const submin=[ChCalc*usingRate[2]/usingRate[3],MaCalc*usingRate[2]/usingRate[3]];const submax=[(ChCalc+ChronoPower/3)*usingRate[2]/usingRate[3],(MaCalc+MarlMagic*77/256)*usingRate[2]/usingRate[3]];const min=(submin[0]+submin[1])*elementMend("water",target);const max=(submax[0]+submax[1])*elementMend("water",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const result=ChronoMarl(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "クロノルッカ":for(let flag=0;flag<Dual.length;flag++){const ChronoLucca=(Chrono,Lucca,target,flag)=>{const ChronoPower=Number(Chrono.power);const CWeaponIndex=Number(Chrono.weapon);const ChronosWeapon=[1,3,7,15,20,25,30,40,43,70,90,110,125,135,145,150,155,170,220];const LuccaMagic=Number(Lucca.magic);const LuccaLV=Number(Lucca.LV);const usableMD=Number(target.MD);const usableDF=Number(target.DF);let usingRate=[];if(flag===0){usingRate=[10,6,1,1]}else if(flag===1){usingRate=[16,11,5,4]}else{usingRate=[29,14,1,1]} let minRate=1;let maxRate=1;if(Number(Lucca.weapon)===8){minRate/=10;maxRate*=3} const minusDF=mendPlus(256-usableDF)/256;const minusMD=mendPlus(256-usableMD*5/2)/256;const ChCalc=usingRate[0]*(ChronoPower*12+ChronosWeapon[CWeaponIndex]*5)/18*minusDF;const LuCalc=usingRate[1]*(LuccaLV+LuccaMagic)*12/15*minusMD;const submin=[ChCalc*usingRate[2]/usingRate[3],LuCalc*usingRate[2]/usingRate[3]*minRate];const submax=[(ChCalc+ChronoPower/3)*usingRate[2]/usingRate[3],(LuCalc+LuccaMagic*77/256)*usingRate[2]/usingRate[3]*maxRate];let min=(submin[0]+submin[1])*elementMend("fire",target);let max=(submax[0]+submax[1])*elementMend("fire",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const result=ChronoLucca(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "クロノカエル":for(let flag=0;flag<Dual.length;flag++){const ChronoFrog=(Chrono,Frog,target,flag)=>{const usableDF=Number(target.DF);const ChronosWeapon=[1,3,7,15,20,25,30,40,43,70,90,110,125,135,145,150,155,170,220];const ChronoPower=Number(Chrono.power);const CweaponIndex=Number(Chrono.weapon);const FrogsWeapon=[6,10,75,90,105,120,120,135,200];const FrogPower=Number(Frog.power);const FweaponIndex=Number(Frog.weapon);let usingRate="";let cAP="";let fAP="";let submin=[];let submax=[];const minusDF=mendPlus(256-usableDF)/256;if(flag===0){usingRate=1;cAP=10*(ChronoPower*12+ChronosWeapon[CweaponIndex]*5)/18*minusDF;fAP=11*(FrogPower*12+FrogsWeapon[FweaponIndex]*5)/18*minusDF;submin=[fAP*5/4,cAP*5/4];submax=[(cAP+(ChronoPower/3))*5/4,(fAP+FrogPower/3)*5/4]}else{const usableMD=Number(target.MD);const minusMD=mendPlus(256-usableMD*5/2)/256;if(flag===1){const FrogMagic=Number(Frog.magic);const FrogLV=Number(Frog.LV);usingRate=elementMend("water",target);cAP=16*(ChronoPower*12+ChronosWeapon[CweaponIndex]*5)/18*minusDF;fAP=11*(FrogMagic+FrogLV)*12/15*minusMD;submin=[fAP*5/4,cAP*5/4];submax=[(cAP+ChronoPower/3)*5/4,(fAP+FrogMagic*77/256)*5/4]}else{usingRate=elementMend("light",target);const ChronoMagic=Number(Chrono.magic);const ChronoLV=Number(Chrono.LV);cAP=14*(ChronoMagic+ChronoLV)*12/15*minusMD;fAP=18*(FrogPower*12+FrogsWeapon[FweaponIndex]*5)/18*minusDF;submin=[cAP*2,fAP];submax=[(cAP+ChronoMagic*77/256)*2,fAP+FrogPower/3]}} let min=(submin[0]+submin[1])*usingRate;let max=(submax[0]+submax[1])*usingRate;return{Min:mendPlus(min),Max:(max)}};const result=ChronoFrog(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "クロノロボ":for(let flag=0;flag<Dual.length;flag++){const ChronoRobot=(Chrono,Robot,target,flag)=>{let chCalc="";let roCalc="";let submin=[];let submax=[];let rate="";if(flag===1){const ChronoPower=Number(Chrono.power);const ChronosWeapon=[1,3,7,15,20,25,30,40,43,70,90,110,125,135,145,150,155,170,220];const CweaponIndex=Number(Chrono.weapon);const usableDF=Number(target.DF);const minusDF=mendPlus(256-usableDF)/256;chCalc=16*(ChronoPower*12+ChronosWeapon[CweaponIndex]*5)/18*minusDF;submin=[chCalc,0];submax=[chCalc+ChronoPower/3,0];rate=2}else{const RobotMagic=Number(Robot.magic);const RobotLV=Number(Robot.LV);const usableMD=Number(target.MD);const minusMD=mendPlus(256-usableMD*5/2)/256;roCalc=(RobotMagic+RobotLV)*12/15*minusMD;if(flag===0){roCalc*=15;submin=[roCalc,0];submax=[roCalc+RobotMagic*77/256,0];rate=elementMend("dark",target)}else{roCalc*=40;const ChronoLV=Number(Chrono.LV);const ChronoMagic=Number(Chrono.magic);chCalc=14*(ChronoMagic+ChronoLV)*12/15*minusMD;submin=[chCalc*5/4,roCalc*5/4];submax=[(chCalc+ChronoMagic*77/256)*5/4,(roCalc+RobotMagic*77/256)*5/4];rate=elementMend("light",target)}} let min=(submin[0]+submin[1])*rate;let max=(submax[0]+submax[1])*rate;return{Min:mendPlus(min),Max:mendPlus(max)}};const result=ChronoRobot(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "クロノエイラ":for(let flag=0;flag<Dual.length;flag++){const ChronoAyla=(Chrono,Ayla,target,flag)=>{const usableDF=Number(target.DF);const minusDF=mendPlus(256-usableDF)/256;let AP="";let min="";let max="";let rate=[];if(flag===2){rate=[1,1,1,1,1];const ChronosWeapon=[1,3,7,15,20,25,30,40,43,70,90,110,125,135,145,150,155,170,220];const ChronoPower=Number(Chrono.power);const CweaponIndex=Number(Chrono.weapon);AP=16*(ChronoPower*12+ChronosWeapon[CweaponIndex]*5)/18*minusDF;min=mendPlus(AP)*2;max=mendPlus(AP+ChronoPower/3)*2}else{const AylaLV=Number(Ayla.LV);const AylaPower=Number(Ayla.power);if(flag==0){rate=[14,7,4,1,1]}else if(flag===1){rate=[20,1,1,2,elementMend("light",target)]} AP=(AylaPower*16+AylaLV*AylaLV/5)*rate[0]/20*minusDF;const submin=AP*rate[1]/rate[2]*rate[3];const submax=(AP+AylaLV/3)*rate[1]/rate[2]*rate[3];min=submin*rate[4];max=submax*rate[4]} return{Min:mendPlus(min),Max:mendPlus(max)}};const result=ChronoAyla(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "マールルッカ":for(let flag=0;flag<Dual.length;flag++){const MarlLucca=(Marl,Lucca,target,flag)=>{const MarlMagic=Number(Marl.magic);const MarlLV=Number(Marl.LV);const LuccaMagic=Number(Lucca.magic);const LuccaLV=Number(Lucca.LV);const usableMD=Number(target.MD);const minus=mendPlus(256-usableMD*5/2)/256;let attackrate=[];if(flag===0){attackrate=[11,11,1,1]}else if(flag===1){attackrate=[14,14,3,2]}else{attackrate=[14,42,5,4]} let minRate=1;let maxRate=1;if(Number(Lucca.weapon)===8){minRate/=10;maxRate*=3} const Map=attackrate[0]*(MarlMagic+MarlLV)*12/15*minus;const Lap=attackrate[1]*(LuccaMagic+LuccaLV)*12/15*minus;const submin=[Map*attackrate[2]/attackrate[3],Lap*attackrate[2]/attackrate[3]*minRate];const submax=[(Map+MarlMagic*77/256)*attackrate[2]/attackrate[3],(Lap+LuccaMagic*77/256)*attackrate[2]/attackrate[3]*maxRate];let min=(submin[0]+submin[1])*elementMend("dark",target);let max=(submax[0]+submax[1])*elementMend("dark",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const result=MarlLucca(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "マールカエル":for(let flag=0;flag<Dual.length;flag++){const MarlFrog=(Marl,Frog,target,flag)=>{const usableMD=Number(target.MD);const minus=mendPlus(256-usableMD*5/2)/256;let rate=[];if(flag===0){rate=[11,11,1,1]}else{rate=[14,14,3,2]} const MarlMagic=Number(Marl.magic);const MarlLV=Number(Marl.LV);const FrogMagic=Number(Frog.magic);const FrogLV=Number(Frog.LV);const Map=rate[0]*(MarlMagic+MarlLV)*12/15*minus;const Fap=rate[1]*(FrogMagic+FrogLV)*12/15*minus;const submin=[Map,Fap];const submax=[Map+MarlMagic*77/256,Fap+FrogMagic*77/256];const ratedmin=[submin[0]*rate[2]/rate[3],submin[1]*rate[2]/rate[3]];const ratedmax=[submax[0]*rate[2]/rate[3],submax[1]*rate[2]/rate[3]];const min=(ratedmin[0]+ratedmin[1])*elementMend("water",target);const max=(ratedmax[0]+ratedmax[1])*elementMend("water",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const result=MarlFrog(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "マールロボ":for(let flag=0;flag<Dual.length;flag++){const MarlRobot=(Marl,Robot,target)=>{const usableMD=Number(target.MD);const usableDF=Number(target.DF);const minusMD=mendPlus(256-usableMD*5/2)/256;const minusDF=mendPlus(256-usableDF)/256;const Marlmagic=Number(Marl.magic);const MarlLV=Number(Marl.LV);const RobotPower=Number(Robot.power);const RobotLV=Number(Robot.LV);const Map=11*(Marlmagic+MarlLV)*12/15*minusMD;const Rap=(RobotLV*RobotLV/5+RobotPower*16)*21/20*minusDF;const submin=[Map*3/2,Rap*3/2];const submax=[(Map+Marlmagic*77/256)*3/2,(Rap+RobotLV/3)*3/2];let min=(submin[0]+submin[1])*elementMend("water",target);let max=(submax[0]+submax[1])*elementMend("water",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const result=MarlRobot(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "マールエイラ":for(let flag=0;flag<Dual.length;flag++){const MarlAyla=(Marl,Ayla,target,flag)=>{const usableMD=Number(target.MD);const usableDF=Number(target.DF);const minus=mendPlus(256-usableMD*5/2)/256;const minusDF=mendPlus(256-usableDF)/256;const MarlMagic=Number(Marl.magic);const MarlLV=Number(Marl.LV);const AylaLV=Number(Ayla.LV);const AylaPower=Number(Ayla.power);let rate=[];if(flag===0){rate=[11,1,1]}else{rate=[14,5,4]} const Map=rate[0]*(MarlMagic+MarlLV)*12/15*minus;const Aap=(AylaLV*AylaLV/5+AylaPower*16)*30/20*minusDF;const submin=[Map*rate[1]/rate[2],Aap*rate[1]/rate[2]];const submax=[(Map+MarlMagic*77/256)*rate[1]/rate[2],(Aap+AylaLV/3)*rate[1]/rate[2]];const min=(submin[0]+submin[1])*elementMend("water",target);const max=(submax[0]+submax[1])*elementMend("water",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const result=MarlAyla(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "ルッカカエル":for(let flag=0;flag<Dual.length;flag++){const LuccaFrog=(Lucca,Frog,target,flag)=>{const usableMD=Number(target.MD);const minusMD=mendPlus(256-usableMD*5/2)/256;const LuccaMagic=Number(Lucca.magic);const LuccaLV=Number(Lucca.LV);let rate=[];let Fap="";let FapMend="";if(flag===1){rate=[32,1,1,1,elementMend("fire",target),1];FapMend=0;Fap=0}else{const usableDF=Number(target.DF);const minusDF=mendPlus(256-usableDF)/256;if(flag===0){const FrogsWeapon=[6,10,75,90,105,120,120,135,200];const usablePower=Number(Frog.power);const usableWeapon=Number(Frog.weapon);rate=[11,18,5,4,elementMend("fire",target),1];FapMend=rate[1]*(usablePower*12+FrogsWeapon[usableWeapon]*5)/18*minusDF;Fap=FapMend+usablePower/3;FapMend*=5/4;Fap*=5/4}else if(flag===2){rate=[42,0,5,4,elementMend("fire",target),1];const FrogStamina=Number(Frog.stamina);const FrogHP=Number(Frog.HP);Fap=(FrogStamina*(FrogHP-1)/14*minusDF+(FrogHP-1)/10)*rate[2]/rate[3];FapMend=0}} let minRate=1;let maxRate=1;if(Number(Lucca.weapon)===8){minRate/=10;maxRate*=3} let Lap=rate[0]*(LuccaMagic+LuccaLV)*12/15*minusMD;let submin=[Lap*rate[2]/rate[3]*minRate,FapMend];let submax=[(Lap+LuccaMagic*77/256)*rate[2]/rate[3]*maxRate,Fap];const min=(submin[0]+submin[1])*rate[4]/rate[5];const max=(submax[0]+submax[1])*rate[4]/rate[5];return{Min:mendPlus(min),Max:mendPlus(max)}};const result=LuccaFrog(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "ルッカロボ":for(let flag=0;flag<Dual.length;flag++){const LuccaRobot=(Lucca,Robot,target,flag)=>{const usableMD=Number(target.MD);const usableDF=Number(target.DF);const minus=mendPlus(256-usableMD*5/2)/256;const minusDF=mendPlus(256-usableDF)/256;let rate=[];let Rap="";const usableWeapon=Number(Robot.weapon);const crisis=(usableWeapon===11)?1:0;const RobotLV=Number(Robot.LV);if(flag!==2){const RobotPower=Number(Robot.power);if(flag===0){rate=[11,1,1,RobotPower/3];const RobotsWeapon=[20,25,30,40,50,70,90,105,120,135,150,1];Rap=11*(RobotPower*12+RobotsWeapon[usableWeapon]*5)/18*minusDF}else if(flag===1){rate=[14,3,2,RobotLV/3];Rap=(RobotLV*RobotLV/5+RobotPower*16)*21/20*4/5*minusDF}}else{const RobotMagic=Number(Robot.magic);rate=[32,3,2,RobotMagic*77/256];Rap=30*(RobotMagic+RobotLV)*12/15*minus} const LuccaMagic=Number(Lucca.magic);const LuccaLV=Number(Lucca.LV);const Lap=rate[0]*(LuccaMagic+LuccaLV)*12/15*minus;let HPchange=[];if(typeof crisis==="undefined"){HPchange=[1,1]}else if(crisis===0){HPchange=[1,1]}else{HPchange=[0,9/2*2]} let minRate=1;let maxRate=1;if(Number(Lucca.weapon)===8){minRate/=10;maxRate*=3} const submin=[Lap*rate[1]/rate[2]*minRate,Rap*rate[1]/rate[2]*HPchange[0]];const submax=[(Lap+LuccaMagic*77/256)*rate[1]/rate[2]*maxRate,(Rap+rate[3])*rate[1]/rate[2]*HPchange[1]];const min=(submin[0]+submin[1])*elementMend("fire",target);const max=(submax[0]+submax[1])*elementMend("fire",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const result=LuccaRobot(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "ルッカエイラ":for(let flag=0;flag<Dual.length;flag++){const LuccaAyla=(Lucca,Ayla,target,flag)=>{const usableMD=Number(target.MD);const usableDF=Number(target.DF);const minus=mendPlus(256-usableMD*5/2)/256;let rate=[];let Aap="";let Lap="";const AylaLV=Number(Ayla.LV);const LuccaMagic=Number(Lucca.magic);const LuccaLV=Number(Lucca.LV);if(flag===1){const AylaMagic=Number(Ayla.magic);rate=[14,0,3,2,AylaMagic*77/256];Aap=mendPlus(40*(AylaMagic+AylaLV)*12/256*minus/256)}else{const AylaPower=Number(Ayla.power);if(flag===0){rate=[11,14,5,4,AylaLV/3]}else{rate=[14,37,5,4,AylaLV/3]} const DFminus=(256-usableDF)/256;Aap=(AylaLV*AylaLV/5+AylaPower*16)*rate[1]/20*DFminus} let minRate=1;let maxRate=1;if(Number(Lucca.weapon)===8){minRate/=10;maxRate*=3} Lap=rate[0]*(LuccaMagic+LuccaLV)*12/15*minus;const submin=[Lap*rate[2]/rate[3]*minRate,Aap*rate[2]/rate[3]];const submax=[(Lap+LuccaMagic*77/256)*rate[2]/rate[3]*maxRate,(Aap+rate[4])*rate[2]/rate[3]];let min=(submin[0]+submin[1])*elementMend("fire",target);let max=(submax[0]+submax[1])*elementMend("fire",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const result=LuccaAyla(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "カエルロボ":for(let flag=0;flag<Dual.length;flag++){const FrogRobot=(Frog,Robot,target,flag)=>{let AP="";let option="";const usableDF=Number(target.DF);const minusDF=256-usableDF;if(flag===0){const FrogPower=Number(Frog.power);const FrogsWeapon=[6,10,75,90,105,120,120,135,200];const FrogWeapon=Number(Frog.weapon);AP=mendPlus(11*(FrogPower*12+FrogsWeapon[FrogWeapon]*5)/18*minusDF/256);option=FrogPower}else{const RobotLV=Number(Robot.LV);const RobotPower=Number(Robot.power);AP=(RobotLV*RobotLV/5+RobotPower*16)*21/20*minusDF/256;option=RobotLV} let min=mendPlus(AP);let max=mendPlus(AP+option/3);return{Min:min*2,Max:max*2}};const result=FrogRobot(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "カエルエイラ":for(let flag=0;flag<Dual.length;flag++){const FrogAyla=(Frog,Ayla,target,flag)=>{const AylaLV=Number(Ayla.LV);const LVtimes=AylaLV*AylaLV/5;const AylaPower=Number(Ayla.power);const usableDF=Number(target.DF);const minus=mendPlus(256-usableDF)/256;let min="";let max="";if(flag===1){const FrogPower=Number(Frog.power);const usableWeapon=Number(Frog.weapon);const FrogsWeapon=[6,10,75,90,105,120,120,135,200];const Fap=18*(FrogPower*12+FrogsWeapon[usableWeapon]*5)/18*minus;const Aap=(LVtimes+AylaPower*16)*37/20*minus;min=Fap*3/2+Aap;max=(Fap+FrogPower/3)*3/2+(Aap+AylaLV/3)}else{const AP=(LVtimes+AylaPower*16)*14/20*minus;min=AP*2;max=(AP+AylaLV/3)*2} return{Min:mendPlus(min),Max:mendPlus(max)}};const result=FrogAyla(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break;case "ロボエイラ":for(let flag=0;flag<Dual.length;flag++){const RobotAyla=(Robot,Ayla,target,flag)=>{const AylaLV=Number(Ayla.LV);const LVtimes=AylaLV*AylaLV/5;const AylaPower=Number(Ayla.power);const usableDF=Number(target.DF);const minus=mendPlus(256-usableDF)/256;let Aap="";let min="";let max="";if(flag===1){const RobotPower=Number(Robot.power);const RobotsWeapon=[20,25,30,40,50,70,90,105,120,135,150,1];const usableWeapon=Number(Robot.weapon);const crisis=(usableWeapon===11)?1:0;const HPchange=(crisis===1)?[0,9/2*2]:[1,1];Aap=(LVtimes+AylaPower*16)*30/20*minus;const Rap=25*(RobotPower*12+RobotsWeapon[usableWeapon]*5)/18*minus;const submin=[Rap*HPchange[0],Aap];const submax=[(Rap+RobotPower/3)*5/4*HPchange[1],(Aap+AylaLV/3)*5/4];min=5/4*(submin[0]+submin[1]);max=submax[0]+submax[1]}else{Aap=(LVtimes+AylaPower*16)*14/20*minus;min=Aap*2;max=(Aap+AylaLV/3)*2} return{Min:mendPlus(min),Max:mendPlus(max)}};const result=RobotAyla(arg1,arg2,defend,flag);Dual[flag].querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Dual[flag].querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `} break}})})(spec,defend);(function(spec){const amount=Array.from(document.getElementById("heal").querySelectorAll("td.amount"));amount.forEach(A=>{A.innerHTML="×"});spec.forEach(P=>{const Magic=Number(P.magic);switch(P.name){case "マール":document.getElementById("オーラ").querySelector("td.amount").innerHTML=Math.floor(Magic*6);document.getElementById("ケアル").querySelector("td.amount").innerHTML=Math.floor(Magic*14);document.getElementById("マールのケアルガ").querySelector("td.amount").innerHTML=Math.floor(Magic*24);break;case "ロボ":document.getElementById("ケアルビーム").querySelector("td.amount").innerHTML=Math.floor(Magic*14);document.getElementById("ヒールビーム").querySelector("td.amount").innerHTML=Math.floor(Magic*10);break;case "カエル":document.getElementById("ベロロン").querySelector("td.amount").innerHTML=Math.floor(Magic*11/2);document.getElementById("ヒール").querySelector("td.amount").innerHTML=Math.floor(Magic*31/5);document.getElementById("カエルのケアルガ").querySelector("td.amount").innerHTML=Math.floor(Magic*24);break;case "エイラ":document.getElementById("キッス").querySelector("td.amount").innerHTML=Math.floor(Magic*29/2);break}});if(party>=2){let allPattern=[];const dualHeal={"クロノマール":{"skill":["かいてんオーラ"],"arg":["マール"]},"マールロボ":{"skill":["オーラビーム","ケアルガウィンド"],"arg":["マール"]},"ロボカエル":{"skill":["ケアルガウェイブ"],"arg":["カエル"]},"カエルエイラ":{"skill":["ベロロンキッス"],"arg":["エイラ"]}};for(let i=0;i<party;i++){for(let j=i+1;j<party;j++){const a=spec[i].name;const b=spec[j].name;const k1=a+b;const k2=b+a;if(dualHeal[k1]){allPattern.push([dualHeal[k1].arg,dualHeal[k1].skill])} if(dualHeal[k2]){allPattern.push([dualHeal[k2].arg,dualHeal[k2].skill])}}} allPattern.forEach(all=>{const arg=spec.find(P=>P.name==all[0]);if(!arg){return} all[1].forEach(S=>{const Magic=Number(arg.magic);switch(S){case "かいてんオーラ":case "オーラビーム":document.getElementById(S).querySelector("td.amount").innerHTML=Math.floor(Magic*6);break;case "ケアルガウィンド":case "ケアルガウェイブ":document.getElementById(S).querySelector("td.amount").innerHTML=Math.floor(Magic*24);break;case "ベロロンキッス":document.getElementById(S).querySelector("td.amount").innerHTML=Math.floor(Magic*29);break}})})}})(spec)} if(howMany==3){(function(spec,defend){let indexMap=spec.map((c,N)=>[c.name,N]);let member=[indexMap[0][0],indexMap[1][0],indexMap[2][0]];const k1=member[0]+member[1]+member[2];const k2=member[0]+member[2]+member[1];const k3=member[1]+member[0]+member[2];const k4=member[1]+member[2]+member[0];const k5=member[2]+member[1]+member[0];const k6=member[2]+member[0]+member[1];const keys=[k1,k2,k3,k4,k5,k6];let ChronoFlag=0;keys.forEach(kif=>{if(kif.includes("クロノ")){ChronoFlag=1}});if(ChronoFlag===1){let usingSkill=[];let enter="";const comboMapN={"クロノマールルッカ":{"arg":["クロノ","マール","ルッカ"]},"クロノマールカエル":{"arg":["クロノ","マール","カエル"]},"クロノマールエイラ":{"arg":["クロノ","マール","エイラ"]},"クロノルッカロボ":{"arg":["クロノ","ルッカ"]},"クロノルッカカエル":{"arg":["クロノ","ルッカ","カエル"]},"クロノルッカエイラ":{"arg":["クロノ","ルッカ","エイラ"]},"クロノカエルロボ":{"arg":["クロノ","カエル","ロボ"]},"クロノロボエイラ":{"arg":["クロノ","ロボ","エイラ"]},"クロノカエルエイラ":{"arg":["クロノ","カエル","エイラ"]}};keys.forEach(ks=>{if(comboMapN[ks]){usingSkill.push(comboMapN[ks]);enter=ks}});if(usingSkill.length===0){return} let MaxandMin=[];const Triple=document.querySelector('.'+enter);const info=comboMapN[enter];const arg1=spec.find(obj=>obj.name===info.arg[0]);const arg2=spec.find(obj=>obj.name===info.arg[1]);const arg3=spec.find(obj=>obj.name===info.arg[2]);const mixDelta=(Chrono,Marl,Lucca,target)=>{const usableMD=Number(target.MD);const divide=mendPlus(256-usableMD*5/2)/256;const ChronoMagic=Number(Chrono.magic);const ChronoLV=Number(Chrono.LV);const ChronoForce=14*(ChronoMagic+ChronoLV)*12/15*divide;const MarlMagic=Number(Marl.magic);const MarlLV=Number(Marl.LV);const MarlForce=14*(MarlMagic+MarlLV)*12/15*divide;const LuccaMagic=Number(Lucca.magic);const LuccaLV=Number(Lucca.LV);const LuccaForce=14*(LuccaMagic+LuccaLV)*12/15*divide;let minRate=1;let maxRate=1;if(Number(Lucca.weapon)===8){minRate/=10;maxRate*=3} const submin=[ChronoForce*5/4,MarlForce*5/4,LuccaForce*5/4*minRate];let submax=[ChronoForce+ChronoMagic*77/256,MarlForce+MarlMagic*77/256,LuccaForce+LuccaMagic*77/256*maxRate];for(let i=0;i<3;i++){submax[i]=submax[i]*5/4} const min=(submin[0]+submin[1]+submin[2])*elementMend("dark",target);const max=(submax[0]+submax[1]+submax[2])*elementMend("dark",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const arkImpulse=(Chrono,Marl,Frog,target)=>{const usableMD=Number(target.MD);const usableDF=Number(target.DF);const minusMD=mendPlus(256-usableMD*5/2)/256;const minusDF=mendPlus(256-usableDF)/256;const ChronoPower=Number(Chrono.power);const ChronoWeaponInd=Number(Chrono.weapon);const ChronosWeapon=[1,3,7,15,20,25,30,40,43,70,90,110,125,135,145,150,155,170,220];const ChronoForce=16*(ChronoPower*12+ChronosWeapon[ChronoWeaponInd]*5)/18*minusDF;const MarlMagic=Number(Marl.magic);const MarlLV=Number(Marl.LV);const MarlForce=14*(MarlMagic+MarlLV)*12/15*minusMD;const FrogPower=Number(Frog.power);const FrogsWeapon=[6,10,75,90,105,120,120,135,200];const FrogWeaponInd=Number(Frog.weapon);const FrogForce=18*(FrogPower*12+FrogsWeapon[FrogWeaponInd]*5)/18*minusDF;const submin=[ChronoForce*5/4,MarlForce*5/4,FrogForce*5/4];const submax=[(ChronoForce+ChronoPower/3)*5/4,(MarlForce+MarlMagic*77/256)*5/4,(FrogForce+FrogPower/3)*5/4];const min=(submin[0]+submin[1]+submin[2])*elementMend("water",target);const max=(submax[0]+submax[1]+submax[2])*elementMend("water",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const finalkick=(Chrono,Marl,Ayla,target)=>{const usableMD=Number(target.MD);const usableDF=Number(target.DF);const minus=mendPlus(256-usableMD*5/2)/256;const ChronoMagic=Number(Chrono.magic);const ChronoLV=Number(Chrono.LV);const ChronoForce=14*(ChronoMagic+ChronoLV)*12/15*minus;const MarlMagic=Number(Marl.magic);const MarlLV=Number(Marl.LV);const MarlForce=14*(MarlMagic+MarlLV)*12/15*minus;const AylaLV=Number(Ayla.LV);const AylaPower=Number(Ayla.power);const minusDF=mendPlus(256-usableDF)/256;const AylaForce=(AylaLV*AylaLV/5+AylaPower/16)*37/20*minusDF;const submin=[ChronoForce*5/4,MarlForce*5/4,AylaForce*5/4];const submax=[(ChronoForce+ChronoMagic*77/256)*5/4,(MarlForce+MarlMagic*77/256)*5/4,(AylaForce+AylaLV/3)*5/4];const min=(submin[0]+submin[1]+submin[2])*elementMend("dark",target);const max=(submax[0]+submax[1]+submax[2])*elementMend("dark",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const fire2curcle=(Chrono,Lucca,target)=>{const usableDF=Number(target.DF);const minusDF=mendPlus(256-usableDF)/256;const ChronoPower=Number(Chrono.power);const ChronoWeaponInd=Number(Chrono.weapon);const ChronosWeapon=[1,3,7,15,20,25,30,40,43,70,90,110,125,135,145,150,155,170,220];const ChronoForce=16*(ChronoPower*12+ChronosWeapon[ChronoWeaponInd]*5)/18*minusDF;const usableMD=Number(target.MD);const minus=mendPlus(256-usableMD*5/2)/256;const LuccaMagic=Number(Lucca.magic);const LuccaLV=Number(Lucca.LV);const LuccaForce=14*(LuccaMagic+LuccaLV)*12/15*minus;let minRate=1;let maxRate=1;if(Number(Lucca.weapon)===8){minRate/=10;maxRate*=3} const submin=[ChronoForce*2,LuccaForce*5/4*minRate];const submax=[(ChronoForce+ChronoPower/3)*2,(LuccaForce+LuccaMagic*77/256)*5/4*maxRate];const min=(submin[0]+submin[1])*elementMend("fire",target);const max=(submax[0]+submax[1])*elementMend("fire",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const deltaStorm=(Chrono,Lucca,Frog,target)=>{const usableMD=Number(target.MD);const minus=mendPlus(256-usableMD*5/2)/256;const ChronoMagic=Number(Chrono.magic);const ChronoLV=Number(Chrono.LV);const ChronoForce=14*(ChronoMagic+ChronoLV)*12/15*minus;const LuccaMagic=Number(Lucca.magic);const LuccaLV=Number(Lucca.LV);const LuccaForce=14*(LuccaMagic+LuccaLV)*12/15*minus;let minRate=1;let maxRate=1;if(Number(Lucca.weapon)===8){minRate/=10;maxRate*=3} const FrogMagic=Number(Frog.magic);const FrogLV=Number(Frog.LV);const FrogForce=14*(FrogMagic+FrogLV)*12/15*minus;const submin=[ChronoForce*5/4,LuccaForce*5/4*minRate,FrogForce*5/4];const submax=[(ChronoForce+ChronoMagic*77/256)*5/4,(LuccaForce+LuccaMagic*77/256)*5/4*maxRate,(FrogForce+FrogMagic*77/256)*5/4];const min=(submin[0]+submin[1]+submin[2])*elementMend("dark",target);const max=(submax[0]+submax[1]+submax[2])*elementMend("dark",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const gutlingKick=(Chrono,Lucca,Ayla,target)=>{const usableMD=Number(target.MD);const minus=mendPlus(256-usableMD*5/2)/256;const ChronoMagic=Number(Chrono.magic);const ChronoLV=Number(Chrono.LV);const ChronoForce=14*(ChronoMagic+ChronoLV)*12/15*minus;const LuccaMagic=Number(Lucca.magic);const LuccaLV=Number(Lucca.LV);const LuccaForce=14*(LuccaMagic+LuccaLV)*12/15*minus;let minRate=1;let maxRate=1;if(Number(Lucca.weapon)===8){minRate/=10;maxRate*=3} const AylaLV=Number(Ayla.LV);const AylaPower=Number(Ayla.power);const usableDF=Number(target.DF);const minusDF=mendPlus(256-usableDF)/526;const AylaForce=(AylaLV*AylaLV/5+AylaPower*16)*37/20*minusDF;const submin=[ChronoForce*5/4,LuccaForce*5/4*minRate,AylaForce*5/4];const submax=[(ChronoForce+ChronoMagic*77/256)*5/4,(LuccaForce+LuccaMagic*77/256)*5/4*maxRate,(AylaForce+AylaLV/3)*5/4];const min=(submin[0]+submin[1]+submin[2])*elementMend("dark",target);const max=(submax[0]+submax[1]+submax[2])*elementMend("dark",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const tripleAttack=(Chrono,Robot,Frog,target)=>{const ChronoPower=Number(Chrono.power);const ChronoWeaponInd=Number(Chrono.weapon);const ChronosWeapon=[1,3,7,15,20,25,30,40,43,70,90,110,125,135,145,150,155,170,220];const usableDF=Number(target.DF);const minusDF=mendPlus(256-usableDF)/256;const ChronoForce=10*(ChronoPower*12+ChronosWeapon[ChronoWeaponInd]*5)/18*minusDF;const RobotLV=Number(Robot.LV);const RobotWeaponInd=Number(Robot.weapon);let crisis=0;if(RobotWeaponInd===11){crisis=1} const RobotPower=Number(Robot.power);const RobotForce=(RobotLV*RobotLV/5+RobotPower/16)*21/20*minusDF;const FrogPower=Number(Frog.power);const FrogsWeapon=[6,10,75,90,105,120,120,135,200];const FrogWeaponInd=Number(Frog.weapon);const FrogForce=11*(FrogPower*12+FrogsWeapon[FrogWeaponInd]*5)/18*minusDF;const submin=[ChronoForce*5/4,RobotForce*5/4,FrogForce*5/4];const submax=[(ChronoForce+ChronoPower/3)*5/4,(RobotForce+RobotLV/3)*5/4,(FrogForce+FrogPower/3)*5/4];rate=[];if(crisis===1){rate=[0,9/2]}else{rate=[1,1]} const min=submin[0]+submin[1]*rate[0]+submin[2];const max=submax[0]+submax[1]*rate[1]+submax[2];return{Min:mendPlus(min),Max:mendPlus(max)}};const bigTornado=(Chrono,Robot,Ayla,target)=>{const usableDF=Number(target.DF);const minusDF=mendPlus(256-usableDF)/256;const ChronoPower=Number(Chrono.power);const ChronosWeapon=[1,3,7,15,20,25,30,40,43,70,90,110,125,135,145,150,155,170,220];const CweaponIndex=Number(Chrono.weapon);const ChronoForce=10*(ChronoPower*12+ChronosWeapon[CweaponIndex]*5)/18*minusDF;const usableMD=Number(target.MD);const minus=mendPlus(256-usableMD*5/2)/256;const RobotMagic=Number(Robot.magic);const RobotLV=Number(Robot.LV);const RobotForce=10*(RobotMagic+RobotLV)*12/15*minus;const AylaMagic=Number(Ayla.magic);const AylaLV=Number(Ayla.LV);const AylaForce=40*(AylaMagic+AylaLV)*12/15*minus;const submin=[ChronoForce*3/2,RobotForce*3/2,AylaForce*3/2];const submax=[(ChronoForce+ChronoPower/3)*3/2,(RobotForce+RobotMagic*77/256)*3/2,(AylaForce+AylaMagic*77/256)*3/2];let rate=[];const RobotWeapon=Number(Robot.weapon);if(RobotWeapon===11){rate=[0,9/2]}else{rate=[1,1]} const min=(submin[0]+submin[1]*rate[0]+submin[2])*elementMend("dark",target);const max=(submax[0]+submax[1]*rate[1]+submax[2])*elementMend("dark",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const threeDAttack=(Chrono,Frog,Ayla,target)=>{const usableDF=Number(target.DF);const ChronoPower=Number(Chrono.power);const ChronosWeapon=[1,3,7,15,20,25,30,40,43,70,90,110,125,135,145,150,155,170,220];const ChronoWeaponInd=Number(Chrono.weapon);const ChronoForce=10*(ChronoPower*12+ChronosWeapon[ChronoWeaponInd]*5)/18*(256-usableDF)/256;const FrogPower=Number(Frog.power);const FrogWeaponInd=Number(Frog.weapon);const FrogsWeapon=[6,10,75,90,105,120,120,135,200];const FrogForce=11*(FrogPower*12+FrogsWeapon[FrogWeaponInd]*5)/18*(256-usableDF)/256;const AylaLV=Number(Ayla.LV);const AylaPower=Number(Ayla.power);const AylaForce=(AylaLV*AylaLV/5+AylaPower/16)*37/20*(256-usableDF)/256;const submin=[mendPlus(mendPlus(ChronoForce)*5/4),mendPlus(mendPlus(FrogForce)*5/4),mendPlus(mendPlus(AylaForce)*5/4)];const submax=[mendPlus(mendPlus(ChronoForce+ChronoPower/3)*5/4),mendPlus(mendPlus(FrogForce+FrogPower/3)*5/4),mendPlus(mendPlus(AylaForce+AylaLV/3)*5/4)];return{Min:submin[0]+submin[1]+submin[2],Max:submax[0]+submax[1]+submax[2]}};let result=[];switch(enter){case "クロノマールルッカ":result=mixDelta(arg1,arg2,arg3,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "クロノマールカエル":result=arkImpulse(arg1,arg2,arg3,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "クロノマールエイラ":result=finalkick(arg1,arg2,arg3,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "クロノルッカロボ":result=fire2curcle(arg1,arg2,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "クロノルッカエイラ":result=gutlingKick(arg1,arg2,arg3,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "クロノルッカカエル":result=deltaStorm(arg1,arg2,arg3,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "クロノカエルロボ":result=tripleAttack(arg1,arg3,arg2,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "クロノカエルエイラ":result=threeDAttack(arg1,arg2,arg3,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "クロノロボエイラ":result=bigTornado(arg1,arg2,arg3,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break}}else{let usingSkill=[];let enter="";const comboMapC={"マールルッカ魔王":{"arg":["マール","ルッカ","魔王"]},"マールルッカエイラ":{"arg":["エイラ"]},"マールカエルロボ":{"arg":["カエル"]},"ルッカロボ魔王":{"arg":["ルッカ","ロボ","魔王"]},"カエルロボエイラ":{"arg":["カエル"]}};keys.forEach(ks=>{if(comboMapC[ks]){usingSkill.push(comboMapC[ks]);enter=ks}});if(usingSkill.length===0){return} let MaxandMin=[];const Triple=document.querySelector('.'+enter);const info=comboMapC[enter];const arg1=spec.find(obj=>obj.name===info.arg[0]);const arg2=spec.find(obj=>obj.name===info.arg[1]);const arg3=spec.find(obj=>obj.name===info.arg[2]);const darkEternal=(Marl,Lucca,Magus,target)=>{const usableMD=Number(target.MD);const minus=mendPlus(256-usableMD*5/2)/256;const MarlMagic=Number(Marl.magic);const MarlLV=Number(Marl.LV);const MarlForce=14*(MarlMagic+MarlLV)*12/15*minus;const LuccaMagic=Number(Lucca.magic);const LuccaLV=Number(Lucca.LV);const LuccaForce=14*(LuccaMagic+LuccaLV)*12/15*minus;let minRate=1;let maxRate=1;if(Number(Lucca.weapon)===8){minRate/=10;maxRate*=3} const MagusMagic=Number(Magus.magic);const MagusLV=Number(Magus.LV);const MagusForce=38*(MagusMagic+MagusLV)*12/15*minus;const submin=[MarlForce*5/4,LuccaForce*5/4*minRate,MagusForce*5/4];const submax=[(MarlForce+MarlMagic*77/256)*5/4,(LuccaForce+LuccaMagic*77/256)*5/4*maxRate,(MagusForce+MagusMagic*77/256)*5/4];const min=(submin[0]+submin[1]+submin[2])*elementMend("dark",target);const max=(submax[0]+submax[1]+submax[2])*elementMend("dark",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const omegaFlare=(Lucca,Robot,Magus,target)=>{const usableMD=Number(target.MD);const minus=mendPlus(256-usableMD*5/2)/256;const LuccaMagic=Number(Lucca.magic);const LuccaLV=Number(Lucca.LV);const LuccaForce=42*(LuccaMagic+LuccaLV)*12/15*minus;let minRate=1;let maxRate=1;if(Number(Lucca.weapon)===8){minRate/=10;maxRate*=3} const RobotMagic=Number(Robot.magic);const RobotLV=Number(Robot.LV);const RobotForce=10*(RobotMagic+RobotLV)*12/15*minus;const MagusMagic=Number(Magus.magic);const MagusLV=Number(Magus.LV);const MagusForce=25*(MagusMagic+MagusLV)*12/15*minus;const submin=[LuccaForce*5/4*minRate,RobotForce*5/4,MagusForce*5/4];const submax=[(LuccaForce+LuccaMagic*77/256)*5/4*maxRate,(RobotForce+RobotMagic*77/256)*5/4,(MagusForce+MagusMagic*77/256)*5/4];const RobotWeapon=Number(Robot.weapon);let rate=[];if(RobotWeapon===11){rate=[0,9/2]}else{rate=[1,1]} const min=(submin[0]+submin[1]*rate[0]+submin[2])*elementMend("dark",target);const max=(submax[0]+submax[1]*rate[1]+submax[2])*elementMend("dark",target);return{Min:mendPlus(min),Max:mendPlus(max)}};const strikeSpin=(Frog,target)=>{const FrogPower=Number(Frog.power);const FrogsWeapon=[6,10,75,90,105,120,120,135,200];const FrogWeaponInd=Number(Frog.weapon);const usableDF=Number(target.DF);const minus=mendPlus(256-usableDF)/256;const FrogForce=18*(FrogPower*12+FrogsWeapon[FrogWeaponInd]*5)/18*minus;const min=FrogForce;const max=FrogForce+FrogPower/3;return{Min:mendPlus(min*4),Max:mendPlus(max*4)}};const poyozoDance=(Ayla,target)=>{const usableMD=Number(target.MD);const minus=mendPlus(256-usableMD*5/2)/256;const AylaMagic=Number(Ayla.magic);const AylaLV=Number(Ayla.LV);const AylaForce=40*(AylaMagic+AylaLV)*12/15*minus;const max=AylaForce+AylaMagic*77/256;return{Min:mendPlus(AylaForce),Max:mendPlus(max)}};const grandream=(Frog,target)=>{const FrogStamina=Number(Frog.stamina);const FrogHP=Number(Frog.HP);const usableDF=Number(target.DF);const minus=mendPlus(256-usableDF)/256;const FrogForce=FrogStamina*(FrogHP-1)*10/140*minus;const max=(FrogForce+(FrogHP-1)/10)*12/5;return{Min:1,Max:mendPlus(max)}};let result=[];switch(enter){case "マールルッカ魔王":result=darkEternal(arg1,arg2,arg3,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "ルッカロボ魔王":result=omegaFlare(arg1,arg2,arg3,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "カエルロボエイラ":result=strikeSpin(arg1,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "マールルッカエイラ":result=poyozoDance(arg1,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break;case "マールカエルロボ":result=grandream(arg1,defend);Triple.querySelector("td.min").innerHTML=` ${Math.floor(result.Min)} `;Triple.querySelector("td.max").innerHTML=` ${Math.floor(result.Max)} `;break}}})(spec,defend)}})
